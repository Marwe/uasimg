<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Workflow for Cataloging Drone Images • uasimg</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="A Workflow for Cataloging Drone Images">
<meta property="og:description" content="uasimg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81567502-3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-81567502-3');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">uasimg</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/uasimg.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/catalog_wrkflw.html">A Workflow for Cataloging Drone Images</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ucanr-igis/uasimg/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="catalog_wrkflw_files/header-attrs-2.3/header-attrs.js"></script><script src="catalog_wrkflw_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>A Workflow for Cataloging Drone Images</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ucanr-igis/uasimg/blob/master/vignettes/catalog_wrkflw.Rmd"><code>vignettes/catalog_wrkflw.Rmd</code></a></small>
      <div class="hidden name"><code>catalog_wrkflw.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://github.com/ucanr-igis/uasimg">uasimg</a></span>)
<span class="co">#&gt; uasimg (version 1.5.0)</span>
<span class="co">#&gt; Bug reports: https://github.com/ucanr-igis/uasimg/issues</span>
</pre></div>
<p>This article presents a workflow for using <code>uasimg</code> to create a <strong>catalog of drone images</strong> from multiple flights that are part of a bigger mapping project / campaign. In practice, your workflow will probably not be linear. Some of the steps below are optional and others may have to be repeated. But the outline presents a typical order of the steps.</p>
<p>Insert graphic here.</p>
<p>Currently the workflow below requires writing and executing R commands either (i.e., in a script). This requires a knowledge of R and a general understanding of what the functions do (explained below). Eventually <code>uasimg</code> will have a GUI (wizard) that walks users through data management steps.</p>
<div id="copy-image-files-from-the-drone-to-a-hard-drive" class="section level1">
<h1 class="hasAnchor">
<a href="#copy-image-files-from-the-drone-to-a-hard-drive" class="anchor"></a>1. Copy image files from the drone to a hard drive</h1>
<ul>
<li>The first step is getting the images off the drone and onto your hard drive.</li>
<li>Usually this involves a memory card reader for your laptop, and Windows Explorer.<br>
</li>
<li>Internal drives are recommended as they tend to be faster and more reliable than external drives. But either can work.<br>
</li>
<li>Move images from one (or more) flights into a directory (folder) named something that will help you remember what images are in there (for example date + flight number: <em>2020-10-19 Flight 03</em>).<br>
</li>
<li>Tip: Save yourself some time by creating the directories before you go out into the field.<br>
</li>
<li>Tip: If you have enough blank SD cards for all your flights, then you can just leave the images on the SD card as a temporary backup. Label each card and put it somewhere safe. If you need it to use it again, reformat the SD card. Windows Explorer generally works fine for this, unless your memory card is &gt;32GB and your drone camera only reads FAT32 (see <a href="http://igis.ucanr.edu/Tech_Notes/Memory_Cards/"><em>Best Practices Working with Memory Cards</em></a> for details).</li>
</ul>
</div>
<div id="extract-flight-metadata-for-the-directory-of-images" class="section level1">
<h1 class="hasAnchor">
<a href="#extract-flight-metadata-for-the-directory-of-images" class="anchor"></a>2. Extract flight metadata for the directory of images</h1>
<p>Example R code:</p>
<pre><code>my_imgs &lt;- uas_info(c("c:/uas/hopland-veg-survey/flight01/DCIM",
                      "c:/uas/hopland-veg-survey/flight02/DCIM",
                      "c:/uas/hopland-veg-survey/flight03/DCIM"))
</code></pre>
<ul>
<li>No internet connection is required for this step.<br>
</li>
<li>This can be done in the field if you want to verify image locations, or back at the office.<br>
</li>
<li>Always save the results of <code><a href="../reference/uas_info.html">uas_info()</a></code> to a variable.<br>
</li>
<li>
<code><a href="../reference/uas_info.html">uas_info()</a></code> can index multiple directories at once. Simply pass a character vector of directory names.<br>
</li>
<li>The first time <code><a href="../reference/uas_info.html">uas_info()</a></code> is run on a directory, it may take a little while to extract the EXIF data from all the images. Subsequent calls should go much faster, because the EXIF data are cached.<br>
</li>
<li>The object returned by <code><a href="../reference/uas_info.html">uas_info()</a></code> contains image locations, the flight area (minimum convex polygon around all the images), basic metadata, and potentially footprints.</li>
</ul>
</div>
<div id="create-flight-metadata-files" class="section level1">
<h1 class="hasAnchor">
<a href="#create-flight-metadata-files" class="anchor"></a>3. Create flight metadata files</h1>
<p>Sample R code:</p>
<pre><code><a href="../reference/uas_metadata_make.html">uas_metadata_make(my_imgs)</a></code></pre>
<ul>
<li>
<em>metadata</em> in this context refers to info that isn’t saved in the images. For example the name of the pilot, the project code, whether there issues during the flight, etc.<br>
</li>
<li>The recommended way to enter and save metadata in <code>uasimg</code> is to create little text files in each directory.<br>
</li>
<li>
<code><a href="../reference/uas_metadata_make.html">uas_metadata_make(my_imgs)</a></code> will create a ‘blank’ metadata text file in each folder in <code>my_imgs</code> (where <code>my_imgs</code> was created by <code><a href="../reference/uas_info.html">uas_info()</a></code>).<br>
</li>
<li>The text files created by <code>metadata_make()</code> can be based on a template where some fields are pre-populated.<br>
</li>
<li>Pass <code>open=TRUE</code> to have the new text files open in your default text editor. Ideally you have a text editor that allows you to open multiple text files at once. You can then edit all the metadata text files and save them. You can use RStudio as text editor also.</li>
</ul>
</div>
<div id="move-oddball-images-into-their-own-folders-optional" class="section level1">
<h1 class="hasAnchor">
<a href="#move-oddball-images-into-their-own-folders-optional" class="anchor"></a>4. Move oddball images into their own folders (optional)</h1>
<ul>
<li>If needed, manually move images that you aren’t going to be stitched into their own folders. These include photos of calibration targets, images from aborted flights, drone selfies, etc. You can move images with Windows Explorer, and create subfolders so they’re still kept together.<br>
</li>
<li>In the future, <code>uasimg</code> may have a function / GUI to help identify and move oddball images</li>
</ul>
</div>
<div id="split-andor-combine-images-from-different-folders" class="section level1">
<h1 class="hasAnchor">
<a href="#split-andor-combine-images-from-different-folders" class="anchor"></a>5. Split and/or combine images from different folders</h1>
<p>Sample R code:</p>
<p><em>coming soon</em></p>
<ul>
<li>Sometimes you’ll want to divide up the images in a folder into multiple folders. For example, the folder may contain images from multiple flights, or you might want to split up the RGB (jpg) files and the mulitspectral (tif) files.<br>
</li>
<li>Other times, you many have several folders of images that were all from the same flight (because most cameras have a limit of 999 images per folder).</li>
<li>For the moment, you have to split and/or merge folders manually (i.e., with Windows Explorer). Remember to (re)create the metadata for each new folder.<br>
</li>
<li>Merging directories may necessitate changing file names first to prevent duplicates.<br>
</li>
<li>Functions are coming to <code>uasimg</code> that will facilitate splitting and merging folders of images</li>
</ul>
</div>
<div id="rerun-uas_info-to-refresh-the-metadata" class="section level1">
<h1 class="hasAnchor">
<a href="#rerun-uas_info-to-refresh-the-metadata" class="anchor"></a>6. (Re)run uas_info() to refresh the metadata</h1>
<p>Sample R code (same as step 2):</p>
<pre><code>my_imgs &lt;- uas_info(c("c:/uas/hopland-veg-survey/flight01/DCIM",
                      "c:/uas/hopland-veg-survey/flight02/DCIM",
                      "c:/uas/hopland-veg-survey/flight03/DCIM"))</code></pre>
<ul>
<li>
<code><a href="../reference/uas_info.html">uas_info()</a></code> ‘sucks up’ the metadata it finds in the metadata text files. So every time you edit the metadata text files, you should rerun <code><a href="../reference/uas_info.html">uas_info()</a></code> for the changes to reflect in subsequent HTML summaries, etc.<br>
</li>
<li>
<code><a href="../reference/uas_info.html">uas_info()</a></code> should go quickly after the initial extraction of EXIF data from the images. But if you add or move images out of a folder, the cache is invalidated and it will extract the EXIF data all over again.</li>
<li>to see what information is saved in a flight metadata objects, type it at the console</li>
</ul>
</div>
<div id="move-images-into-the-final-directory-tree-optional" class="section level1">
<h1 class="hasAnchor">
<a href="#move-images-into-the-final-directory-tree-optional" class="anchor"></a>Move images into the ‘final’ directory tree (optional)</h1>
<p>Sample R code:</p>
<p><em>coming soon</em></p>
<ul>
<li>Now that the metadata is more or less finalized, you can move the images into their ‘final’ tree structure.<br>
</li>
<li>A function is coming that will i) create a directory tree structure based on a user template with placeholders that will be filled in with actual metadata, and ii) move (or copy) images from their current location into the ‘final’ directory tree.</li>
</ul>
</div>
<div id="export-flight-geometries-to-gis-files-optional" class="section level1">
<h1 class="hasAnchor">
<a href="#export-flight-geometries-to-gis-files-optional" class="anchor"></a>Export Flight Geometries to GIS Files (Optional)</h1>
<p>Sample R code:</p>
<ul>
<li>If desired, you can export the geometries of individual flights as Shapefiles and KML files.<br>
</li>
<li>This includes the image centroids, a minimum convex polygon, and individual image estimated footprints.<br>
</li>
<li>Be default, the Shapefiles and KML files will go into a subdirectory of the image folder called ‘map’.<br>
</li>
<li>The <code>merge</code> and <code>output_dir</code> arguments in <code>uas_exp_kml()</code> allow you to export the coverage area from multiple flights into a single KML file, that you can then import into your flight planning software to see where you’ve already flown.</li>
</ul>
</div>
<div id="create-individual-flight-summaries" class="section level1">
<h1 class="hasAnchor">
<a href="#create-individual-flight-summaries" class="anchor"></a>Create Individual Flight Summaries</h1>
<p>Sample R code:</p>
<ul>
<li>This step involves creating standalone HTML pages that summarize images in a single folder. These can be thought of as the individual ‘pages’ for a catalog.<br>
</li>
<li>If you want image thumbnails in the pop-up windows, set <code>thumbnails = TRUE</code>. Be advised that creating thumbnails can take a while.</li>
</ul>
</div>
<div id="create-a-master-table-of-contents-for-all-the-flight-summaries" class="section level1">
<h1 class="hasAnchor">
<a href="#create-a-master-table-of-contents-for-all-the-flight-summaries" class="anchor"></a>Create a master Table of Contents for all the Flight Summaries</h1>
<p>Sample R code:</p>
<ul>
<li>The final step is to create a master Table of Contents for all the flight summaries. The TOC is a standalone HTML file with links to individual flight summaries.<br>
</li>
<li>Use <code>flight_map</code> to insert a little interactive map of all the flight areas at the top of the TOC.<br>
</li>
<li>Use <code>additional_kml</code> to display additional KML files into the summary map. For example this could be overall boundary for the campaign.<br>
</li>
<li>Use the <code>gather</code> argument to copy all files for the catalog into one directory. This includes the individual flight summary pages, KML files, and thumbnails.</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Andy Lyons.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
